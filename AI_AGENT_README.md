# AI Agent للشات بوت Tec

تم تطوير AI Agent ذكي للشات بوت Tec باستخدام OpenAI GPT-4.1-mini. هذا الوكيل الذكي قادر على فهم أسئلة المستخدمين والبحث في قاعدة معرفة شاملة عن جامعة عمان العربية لتقديم إجابات دقيقة ومفيدة.

## المزايا الرئيسية

**الذكاء الاصطناعي المتقدم**: يستخدم الوكيل نموذج GPT-4.1-mini من OpenAI لفهم الأسئلة المعقدة والسياق، مما يجعله أذكى بكثير من نظام الكلمات المفتاحية التقليدي.

**قاعدة معرفة شاملة**: يحتوي الوكيل على قاعدة معرفة محلية شاملة تغطي جميع جوانب جامعة عمان العربية، بما في ذلك معلومات الاتصال، التصنيفات والإنجازات، الاعتمادات الدولية، الكليات والتخصصات، القبول والتسجيل، الخصومات والمنح، والرسوم الدراسية.

**Function Calling**: يستخدم الوكيل ميزة Function Calling من OpenAI لاستدعاء أداة البحث في قاعدة المعرفة بشكل ذكي عند الحاجة، مما يضمن الحصول على المعلومات الأكثر دقة وملاءمة.

**إجابات طبيعية ومنظمة**: يقدم الوكيل إجابات بلغة عربية طبيعية وسلسة، مع استخدام الإيموجي والتنسيق لجعل المعلومات سهلة القراءة والفهم.

## البنية التقنية

### الملفات الرئيسية

- **ai_agent_cli.py**: نسخة CLI من AI Agent، تُستدعى من Node.js server لمعالجة رسائل المستخدمين.
- **ai_agent_simple.py**: نسخة standalone من AI Agent للاختبار المحلي.
- **ai_chatbot_api.py**: Flask API (اختياري) لتشغيل AI Agent كخدمة منفصلة.
- **server.js**: تم تحديث endpoint `/api/chatbot/message` لاستخدام AI Agent بدلاً من نظام الكلمات المفتاحية.

### كيف يعمل

عندما يرسل المستخدم رسالة إلى الشات بوت، يحدث التدفق التالي:

1. يستقبل `server.js` الرسالة عبر endpoint `/api/chatbot/message`
2. يتحقق من أن الشات بوت مفعّل في قاعدة البيانات
3. يستدعي `ai_agent_cli.py` باستخدام `child_process.spawn`
4. يقوم AI Agent بتحليل السؤال باستخدام GPT-4.1-mini
5. إذا احتاج الوكيل لمعلومات، يستدعي أداة `search_aau_knowledge`
6. تبحث الأداة في قاعدة المعرفة المحلية عن المعلومات المطلوبة
7. يستقبل الوكيل المعلومات ويصيغ إجابة طبيعية ومفيدة
8. تُعاد الإجابة إلى `server.js` كـ JSON
9. يرسل `server.js` الإجابة إلى المستخدم عبر واجهة الشات بوت

## المتطلبات

**Python 3.11**: مثبت مسبقاً في البيئة

**المكتبات المطلوبة**:
- openai (مثبتة)
- langchain (مثبتة)
- langchain-openai (مثبتة)
- flask (مثبتة)
- flask-cors (مثبتة)

**متغيرات البيئة**:
- `OPENAI_API_KEY`: مفتاح OpenAI API (متوفر في البيئة الحالية)

## الاستخدام

### من خلال الموقع

الشات بوت يعمل تلقائياً على الموقع. المستخدمون يمكنهم:
1. النقر على زر Tec العائم على يسار الشاشة
2. كتابة أسئلتهم في نافذة الشات
3. الحصول على إجابات ذكية ودقيقة

### التحكم من لوحة التحكم

يمكن للمسؤولين تفعيل أو تعطيل الشات بوت من لوحة التحكم:
1. تسجيل الدخول إلى Dashboard
2. الانتقال إلى Settings
3. قسم "Tec Chatbot Settings"
4. تفعيل أو تعطيل الشات بوت

### الاختبار المحلي

لاختبار AI Agent محلياً:

```bash
cd /home/ubuntu/TRi
python3.11 ai_agent_cli.py "ما هي تصنيفات الجامعة؟"
```

أو استخدام النسخة التفاعلية:

```bash
python3.11 ai_agent_simple.py
```

## توسيع قاعدة المعرفة

لإضافة معلومات جديدة إلى قاعدة المعرفة، قم بتحرير `KNOWLEDGE_BASE` في `ai_agent_cli.py`:

```python
KNOWLEDGE_BASE = {
    "new_category": {
        "keywords": ["كلمة1", "كلمة2", "keyword1"],
        "info": """المعلومات الجديدة هنا..."""
    }
}
```

## الملاحظات الهامة

**التكلفة**: يستخدم AI Agent مفتاح OpenAI API المتوفر في البيئة الحالية. في بيئة الإنتاج، ستحتاج إلى توفير مفتاح API خاص بك، وسيكون هناك تكلفة لكل استدعاء (رخيصة جداً مع GPT-4.1-mini).

**الأداء**: AI Agent يستغرق بضع ثوانٍ للإجابة على كل سؤال (بسبب استدعاء OpenAI API). هذا طبيعي ومقبول لشات بوت ذكي.

**الدقة**: AI Agent يعتمد على قاعدة المعرفة المحلية. تأكد من تحديث المعلومات بانتظام للحفاظ على دقة الإجابات.

## المقارنة مع النظام السابق

| الميزة | النظام القديم (Keyword-Based) | AI Agent الجديد |
|--------|-------------------------------|------------------|
| الذكاء | محدود جداً | متقدم جداً |
| فهم السياق | لا | نعم |
| الإجابات | ثابتة ومحددة مسبقاً | ديناميكية وطبيعية |
| التكلفة | مجاني 100% | يتطلب OpenAI API |
| السرعة | فوري | بضع ثوانٍ |
| التوسع | يدوي ومعقد | سهل ومرن |

## الدعم والتطوير

لأي أسئلة أو مشاكل، يرجى التواصل مع فريق التطوير.

---

**تم التطوير بواسطة**: Manus AI Agent
**التاريخ**: أكتوبر 2025
**الإصدار**: 1.0.0

